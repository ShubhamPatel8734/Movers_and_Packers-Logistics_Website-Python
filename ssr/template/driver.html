{% extends 'header.html' %}
{% load static %}
{% block driver %}active{% endblock %}

{% block content %}

<div id="main-content">
    <div class="page-heading">
        <div class="page-title">
            <div class="row">
                <div class="col-12 col-md-6 order-md-1 order-last">
                    <h3>Driver Table</h3>
                    <p class="text-subtitle text-muted">

                    </p>
                </div>
                <div class="col-12 col-md-6 order-md-2 order-first">
                    <nav
                            aria-label="breadcrumb"
                            class="breadcrumb-header float-start float-lg-end"
                    >
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="/index/">Dashboard</a>
                            </li>
                            <!--                            <li class="breadcrumb-item active" aria-current="page">-->
                            <!--                                DriverTable-->
                            <!--                            </li>-->
                        </ol>
                    </nav>
                </div>
            </div>
        </div>

            {% csrf_token %}
            <section class="section">
                <div class="card">
                    <div class="card-header"></div>
                    <div class="card-body">

                        <table class="table table-striped" id="table1">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Username</th>
                                <th>Gender</th>
                                <th>Email</th>
                                <th>Contact</th>
                                <th>License_No</th>
                                <th>Available</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tbody>

                            {% for data in dr %}

                            <tr>
                                <td>{{data.dri_id}}</td>
                                <td>{{data.first_name}} {{data.last_name}}</td>
                                <td>{{data.username}}</td>
                                <td>{{data.gender}}</td>
                                <td>{{data.dri_email}}</td>
                                <td>{{data.dri_contact}}</td>
                                <td>{{data.dri_license}}</td>
                                <td>
                                    <form method="post" action="/allocate_driver/{{data.dri_id}}">
                                        {% csrf_token %}
                                    {% if data.is_available == 1 %}
                                    &nbsp;&nbsp;<span class="badge bg-light-danger">Allotted</span>
                                    {% elif data.is_available == 2 %}
                                      <span class="badge bg-light-secondary">Not Available</span>
                                    {% else %}

                                    &nbsp;&nbsp;  <input type="hidden" name="book_id" value="{{bid}}"/>
                                        {% if bid == 0 %}
                                            <span class="badge bg-light-success">Available</span>
                                        {% else %}
                                        <button type="submit" class="btn btn-primary me-1 mb-1">
                                            Allot
                                        </button>
                                        {% endif %}
                                    {% endif %}
                                    </form>
                                </td>
                                <td>
                                    <a href="/d_driver/{{data.dri_id}}"><svg viewBox="0 0 24 24" height="40px" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5 6.77273H9.2M19 6.77273H14.8M9.2 6.77273V5.5C9.2 4.94772 9.64772 4.5 10.2 4.5H13.8C14.3523 4.5 14.8 4.94772 14.8 5.5V6.77273M9.2 6.77273H14.8M6.4 8.59091V15.8636C6.4 17.5778 6.4 18.4349 6.94673 18.9675C7.49347 19.5 8.37342 19.5 10.1333 19.5H13.8667C15.6266 19.5 16.5065 19.5 17.0533 18.9675C17.6 18.4349 17.6 17.5778 17.6 15.8636V8.59091M9.2 10.4091V15.8636M12 10.4091V15.8636M14.8 10.4091V15.8636" stroke="#435EBE" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg></a><br/><br/>
                                </td>
                            </tr>

                            {% endfor %}

                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </form>
    </div>
</div>

{% endblock %}
